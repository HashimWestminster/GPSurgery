{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thami\\\\Documents\\\\21W- Local Software Dev Group Project\\\\medicalRecordsV2\\\\src\\\\Components\\\\MyUpdateButton.js\",\n  _s = $RefreshSig$();\nimport { Button } from 'govuk-react';\nimport jq from 'jquery';\nimport React, { useState, useEffect, useContext } from 'react';\nimport { CurrentContext } from '../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction MyUpdateButton(props) {\n  _s();\n  const currentContext = useContext(CurrentContext);\n  function handleUpdate() {\n    const url_updateMedicalRecords = 'http://localhost:4000/updateMedicalRecordsPdo.php';\n    if (!currentContext.medicalRecord) {\n      console.error(\"Medical record not found\");\n      return;\n    }\n    jq.ajax({\n      type: 'POST',\n      url: url_updateMedicalRecords,\n      data: {\n        nhsNumber: currentContext.medicalRecord.NHSNumber,\n        forename: props.forename,\n        surname: props.surname,\n        personDOB: props.personDOB,\n        genderCode: props.genderCode,\n        postcode: props.postcode\n      },\n      success: function (data, textStatus, xhr) {\n        if (data === 'failed') {\n          console.error('Update failed');\n        } else {\n          const updatedRecord = JSON.parse(data);\n          currentContext.setMedicalRecord(updatedRecord);\n        }\n      }\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Button, {\n      id: \"submitButton\",\n      onClick: () => handleUpdate(props),\n      children: \" Update \"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n_s(MyUpdateButton, \"kfE+Mm4CXRMTuS4+N/9QPFGSsmU=\");\n_c = MyUpdateButton;\nexport default MyUpdateButton;\nvar _c;\n$RefreshReg$(_c, \"MyUpdateButton\");","map":{"version":3,"names":["Button","jq","React","useState","useEffect","useContext","CurrentContext","jsxDEV","_jsxDEV","Fragment","_Fragment","MyUpdateButton","props","_s","currentContext","handleUpdate","url_updateMedicalRecords","medicalRecord","console","error","ajax","type","url","data","nhsNumber","NHSNumber","forename","surname","personDOB","genderCode","postcode","success","textStatus","xhr","updatedRecord","JSON","parse","setMedicalRecord","children","id","onClick","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/thami/Documents/21W- Local Software Dev Group Project/medicalRecordsV2/src/Components/MyUpdateButton.js"],"sourcesContent":["import { Button } from 'govuk-react';\r\nimport jq from 'jquery';\r\nimport React, { useState, useEffect, useContext } from 'react';\r\nimport { CurrentContext } from '../App';\r\n\r\n\r\nfunction MyUpdateButton(props) {\r\n    const currentContext = useContext(CurrentContext);\r\n\r\n    function handleUpdate() {\r\n        const url_updateMedicalRecords = 'http://localhost:4000/updateMedicalRecordsPdo.php';\r\n        if (!currentContext.medicalRecord) {\r\n            console.error(\"Medical record not found\");\r\n            return;\r\n        }\r\n\r\n        jq.ajax({\r\n            type: 'POST',\r\n            url: url_updateMedicalRecords,\r\n            data: {\r\n                nhsNumber: currentContext.medicalRecord.NHSNumber,\r\n                forename: props.forename,\r\n                surname: props.surname,\r\n                personDOB: props.personDOB,\r\n                genderCode: props.genderCode,\r\n                postcode: props.postcode,\r\n            },\r\n            success: function (data, textStatus, xhr) {\r\n                if (data === 'failed') {\r\n                    console.error('Update failed');\r\n                } else {\r\n                    const updatedRecord = JSON.parse(data);\r\n                    currentContext.setMedicalRecord(updatedRecord);\r\n                }\r\n            },\r\n        });\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <Button id=\"submitButton\" onClick={() => handleUpdate(props)}> Update </Button>\r\n            \r\n        </>\r\n\r\n    );\r\n}\r\nexport default MyUpdateButton;"],"mappings":";;AAAA,SAASA,MAAM,QAAQ,aAAa;AACpC,OAAOC,EAAE,MAAM,QAAQ;AACvB,OAAOC,KAAK,IAAIC,QAAQ,EAAEC,SAAS,EAAEC,UAAU,QAAQ,OAAO;AAC9D,SAASC,cAAc,QAAQ,QAAQ;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAGxC,SAASC,cAAcA,CAACC,KAAK,EAAE;EAAAC,EAAA;EAC3B,MAAMC,cAAc,GAAGT,UAAU,CAACC,cAAc,CAAC;EAEjD,SAASS,YAAYA,CAAA,EAAG;IACpB,MAAMC,wBAAwB,GAAG,mDAAmD;IACpF,IAAI,CAACF,cAAc,CAACG,aAAa,EAAE;MAC/BC,OAAO,CAACC,KAAK,CAAC,0BAA0B,CAAC;MACzC;IACJ;IAEAlB,EAAE,CAACmB,IAAI,CAAC;MACJC,IAAI,EAAE,MAAM;MACZC,GAAG,EAAEN,wBAAwB;MAC7BO,IAAI,EAAE;QACFC,SAAS,EAAEV,cAAc,CAACG,aAAa,CAACQ,SAAS;QACjDC,QAAQ,EAAEd,KAAK,CAACc,QAAQ;QACxBC,OAAO,EAAEf,KAAK,CAACe,OAAO;QACtBC,SAAS,EAAEhB,KAAK,CAACgB,SAAS;QAC1BC,UAAU,EAAEjB,KAAK,CAACiB,UAAU;QAC5BC,QAAQ,EAAElB,KAAK,CAACkB;MACpB,CAAC;MACDC,OAAO,EAAE,SAAAA,CAAUR,IAAI,EAAES,UAAU,EAAEC,GAAG,EAAE;QACtC,IAAIV,IAAI,KAAK,QAAQ,EAAE;UACnBL,OAAO,CAACC,KAAK,CAAC,eAAe,CAAC;QAClC,CAAC,MAAM;UACH,MAAMe,aAAa,GAAGC,IAAI,CAACC,KAAK,CAACb,IAAI,CAAC;UACtCT,cAAc,CAACuB,gBAAgB,CAACH,aAAa,CAAC;QAClD;MACJ;IACJ,CAAC,CAAC;EACN;EAGA,oBACI1B,OAAA,CAAAE,SAAA;IAAA4B,QAAA,eACI9B,OAAA,CAACR,MAAM;MAACuC,EAAE,EAAC,cAAc;MAACC,OAAO,EAAEA,CAAA,KAAMzB,YAAY,CAACH,KAAK,CAAE;MAAA0B,QAAA,EAAC;IAAQ;MAAAG,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAS,iBAEhF;AAGX;AAAC/B,EAAA,CAxCQF,cAAc;AAAAkC,EAAA,GAAdlC,cAAc;AAyCvB,eAAeA,cAAc;AAAC,IAAAkC,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}