{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\thami\\\\Documents\\\\21W- Local Software Dev Group Project\\\\medicalRecordsV2\\\\src\\\\Components\\\\MyUpdateButton.js\",\n  _s = $RefreshSig$();\nimport React, { useContext, useState } from 'react';\nimport { Button } from 'govuk-react';\nimport jq from 'jquery';\nimport { CurrentContext } from '../App';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction MyUpdateButton(props, isFormValid) {\n  _s();\n  const currentContext = useContext(CurrentContext);\n  const [inputFilled, setInputFilled] = useState(false);\n  function handleUpdate() {\n    const url_updateMedicalRecords = 'http://localhost:4000/updateMedicalRecordsPdo.php';\n    if (!currentContext.medicalRecord) {\n      console.error(\"Medical record not found\");\n      return;\n    }\n    jq.ajax({\n      type: 'POST',\n      url: url_updateMedicalRecords,\n      data: {\n        nhsNumber: currentContext.medicalRecord.nhsNumber,\n        doseNumber: props.doseNumber,\n        vaccinationDate: props.vaccinationDate,\n        countryOfVaccination: props.countryOfVaccination,\n        authority: props.authority,\n        site: props.site,\n        totalSeriesOfDoses: props.totalSeriesOfDoses,\n        displayName: props.displayName,\n        snomedCode: props.snomedCode,\n        dateEntered: props.dateEntered,\n        procedureCode: props.procedureCode,\n        booster: props.booster,\n        vaccineId: props.vaccineId\n      },\n      success: function (data, textStatus, xhr) {\n        if (data === 'failed') {\n          console.error('Update failed');\n        } else {\n          const updatedRecord = JSON.parse(data);\n          currentContext.setMedicalRecord(updatedRecord);\n        }\n      }\n    });\n  }\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: /*#__PURE__*/_jsxDEV(Button, {\n      id: \"submitButton\",\n      onClick: () => handleUpdate(props),\n      disabled: isFormValid,\n      children: \"Update\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 50,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}\n_s(MyUpdateButton, \"oCLCYStCWUXvYYJ1bCvqzswap+4=\");\n_c = MyUpdateButton;\nexport default MyUpdateButton;\nvar _c;\n$RefreshReg$(_c, \"MyUpdateButton\");","map":{"version":3,"names":["React","useContext","useState","Button","jq","CurrentContext","jsxDEV","_jsxDEV","Fragment","_Fragment","MyUpdateButton","props","isFormValid","_s","currentContext","inputFilled","setInputFilled","handleUpdate","url_updateMedicalRecords","medicalRecord","console","error","ajax","type","url","data","nhsNumber","doseNumber","vaccinationDate","countryOfVaccination","authority","site","totalSeriesOfDoses","displayName","snomedCode","dateEntered","procedureCode","booster","vaccineId","success","textStatus","xhr","updatedRecord","JSON","parse","setMedicalRecord","children","id","onClick","disabled","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/thami/Documents/21W- Local Software Dev Group Project/medicalRecordsV2/src/Components/MyUpdateButton.js"],"sourcesContent":["import React, { useContext, useState } from 'react';\r\nimport { Button } from 'govuk-react';\r\nimport jq from 'jquery';\r\nimport { CurrentContext } from '../App';\r\n\r\n\r\nfunction MyUpdateButton(props, isFormValid) {\r\n    const currentContext = useContext(CurrentContext);\r\n    const [inputFilled, setInputFilled] = useState(false);\r\n\r\n    function handleUpdate() {\r\n        const url_updateMedicalRecords = 'http://localhost:4000/updateMedicalRecordsPdo.php';\r\n        if (!currentContext.medicalRecord) {\r\n            console.error(\"Medical record not found\");\r\n            return;\r\n        }\r\n\r\n        jq.ajax({\r\n            type: 'POST',\r\n            url: url_updateMedicalRecords,\r\n            data: {\r\n                nhsNumber: currentContext.medicalRecord.nhsNumber,\r\n                doseNumber: props.doseNumber,\r\n                vaccinationDate: props.vaccinationDate,\r\n                countryOfVaccination: props.countryOfVaccination,\r\n                authority: props.authority,\r\n                site: props.site,\r\n                totalSeriesOfDoses: props.totalSeriesOfDoses,\r\n                displayName: props.displayName,\r\n                snomedCode: props.snomedCode,\r\n                dateEntered: props.dateEntered,\r\n                procedureCode: props.procedureCode,\r\n                booster: props.booster,\r\n                vaccineId: props.vaccineId,\r\n            },\r\n            success: function (data, textStatus, xhr) {\r\n                if (data === 'failed') {\r\n                    console.error('Update failed');\r\n                } else {\r\n                    const updatedRecord = JSON.parse(data);\r\n                    currentContext.setMedicalRecord(updatedRecord);\r\n                }\r\n            },\r\n        });\r\n    }\r\n    \r\n\r\n    return (\r\n        <>\r\n            <Button id=\"submitButton\" onClick={() => handleUpdate(props)} disabled={isFormValid}>\r\n                Update\r\n            </Button>\r\n            \r\n        </>\r\n\r\n    );\r\n}\r\nexport default MyUpdateButton;"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,UAAU,EAAEC,QAAQ,QAAQ,OAAO;AACnD,SAASC,MAAM,QAAQ,aAAa;AACpC,OAAOC,EAAE,MAAM,QAAQ;AACvB,SAASC,cAAc,QAAQ,QAAQ;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAGxC,SAASC,cAAcA,CAACC,KAAK,EAAEC,WAAW,EAAE;EAAAC,EAAA;EACxC,MAAMC,cAAc,GAAGb,UAAU,CAACI,cAAc,CAAC;EACjD,MAAM,CAACU,WAAW,EAAEC,cAAc,CAAC,GAAGd,QAAQ,CAAC,KAAK,CAAC;EAErD,SAASe,YAAYA,CAAA,EAAG;IACpB,MAAMC,wBAAwB,GAAG,mDAAmD;IACpF,IAAI,CAACJ,cAAc,CAACK,aAAa,EAAE;MAC/BC,OAAO,CAACC,KAAK,CAAC,0BAA0B,CAAC;MACzC;IACJ;IAEAjB,EAAE,CAACkB,IAAI,CAAC;MACJC,IAAI,EAAE,MAAM;MACZC,GAAG,EAAEN,wBAAwB;MAC7BO,IAAI,EAAE;QACFC,SAAS,EAAEZ,cAAc,CAACK,aAAa,CAACO,SAAS;QACjDC,UAAU,EAAEhB,KAAK,CAACgB,UAAU;QAC5BC,eAAe,EAAEjB,KAAK,CAACiB,eAAe;QACtCC,oBAAoB,EAAElB,KAAK,CAACkB,oBAAoB;QAChDC,SAAS,EAAEnB,KAAK,CAACmB,SAAS;QAC1BC,IAAI,EAAEpB,KAAK,CAACoB,IAAI;QAChBC,kBAAkB,EAAErB,KAAK,CAACqB,kBAAkB;QAC5CC,WAAW,EAAEtB,KAAK,CAACsB,WAAW;QAC9BC,UAAU,EAAEvB,KAAK,CAACuB,UAAU;QAC5BC,WAAW,EAAExB,KAAK,CAACwB,WAAW;QAC9BC,aAAa,EAAEzB,KAAK,CAACyB,aAAa;QAClCC,OAAO,EAAE1B,KAAK,CAAC0B,OAAO;QACtBC,SAAS,EAAE3B,KAAK,CAAC2B;MACrB,CAAC;MACDC,OAAO,EAAE,SAAAA,CAAUd,IAAI,EAAEe,UAAU,EAAEC,GAAG,EAAE;QACtC,IAAIhB,IAAI,KAAK,QAAQ,EAAE;UACnBL,OAAO,CAACC,KAAK,CAAC,eAAe,CAAC;QAClC,CAAC,MAAM;UACH,MAAMqB,aAAa,GAAGC,IAAI,CAACC,KAAK,CAACnB,IAAI,CAAC;UACtCX,cAAc,CAAC+B,gBAAgB,CAACH,aAAa,CAAC;QAClD;MACJ;IACJ,CAAC,CAAC;EACN;EAGA,oBACInC,OAAA,CAAAE,SAAA;IAAAqC,QAAA,eACIvC,OAAA,CAACJ,MAAM;MAAC4C,EAAE,EAAC,cAAc;MAACC,OAAO,EAAEA,CAAA,KAAM/B,YAAY,CAACN,KAAK,CAAE;MAACsC,QAAQ,EAAErC,WAAY;MAAAkC,QAAA,EAAC;IAErF;MAAAI,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA;EAAS,iBAEV;AAGX;AAACxC,EAAA,CAlDQH,cAAc;AAAA4C,EAAA,GAAd5C,cAAc;AAmDvB,eAAeA,cAAc;AAAC,IAAA4C,EAAA;AAAAC,YAAA,CAAAD,EAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}